<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title><%= title %></title>
        <link rel="stylesheet" href="<%= basePath %>/css/main.css" />
        <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet" />
    </head>
    <body>
        <%- include('partials/header') %>

        <section class="content-section">
            <h1>Find Exercises</h1>
            <p>Search for exercises by muscle group to add to your workout.</p>


            <form action="<%= basePath %>/fitness/exercises/search" method="GET" class="styled-form max-w-500">
                <div class="form-group">
                    <label for="muscle">Select Muscle Group</label>
                    <select name="muscle" id="muscle">
                        <option value="abdominals" <%= selectedMuscle === 'abdominals' ? 'selected' : '' %>>Abdominals</option>
                        <option value="biceps" <%= selectedMuscle === 'biceps' ? 'selected' : '' %>>Biceps</option>
                        <option value="calves" <%= selectedMuscle === 'calves' ? 'selected' : '' %>>Calves</option>
                        <option value="chest" <%= selectedMuscle === 'chest' ? 'selected' : '' %>>Chest</option>
                        <option value="glutes" <%= selectedMuscle === 'glutes' ? 'selected' : '' %>>Glutes</option>
                        <option value="hamstrings" <%= selectedMuscle === 'hamstrings' ? 'selected' : '' %>>Hamstrings</option>
                        <option value="lats" <%= selectedMuscle === 'lats' ? 'selected' : '' %>>Lats</option>
                        <option value="lower_back" <%= selectedMuscle === 'lower_back' ? 'selected' : '' %>>Lower Back</option>
                        <option value="quadriceps" <%= selectedMuscle === 'quadriceps' ? 'selected' : '' %>>Quadriceps</option>
                        <option value="triceps" <%= selectedMuscle === 'triceps' ? 'selected' : '' %>>Triceps</option>
                    </select>
                </div>
                <button type="submit" class="btn-cta">Find Exercises</button>
            </form>

            <% if (exercises && exercises.length > 0) { %>
            <div class="grid-container grid-auto-fit margin-top-40">
                <% exercises.forEach(function(ex) { %>
                <div class="card">
                    <h3 class="text-accent margin-bottom-10"><%= ex.name %></h3>
                    <p><strong>Type:</strong> <%= ex.type %></p>
                    <p><strong>Muscle:</strong> <%= ex.muscle %></p>
                    <p><strong>Difficulty:</strong> <%= ex.difficulty %></p>
                    <p class="text-muted margin-top-10" style="font-size: 0.9rem"><%= ex.instructions.substring(0, 100) %>...</p>
                    <div class="text-right margin-top-20">
                        <a href="<%= basePath %>/fitness/add?activity_name=<%= encodeURIComponent(ex.name) %>"
                       class="btn-login"
                       style="display: inline-block; width: 100%; text-align: center;">
                       Log This
                    </a>
                    </div>
                </div>
                <% }); %>
            </div>
        </section>
        <% } else if (typeof exercises !== 'undefined') { %>
        <section class="content-section text-center">
            <p>No exercises found.</p>
        </section>
        <% } %>

    </body>
</html>
