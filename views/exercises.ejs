<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title><%= title %></title>
        <link rel="stylesheet" href="/css/main.css" />
        <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet" />
    </head>
    <body>
        <%- include('partials/header') %>

        <section class="content-section">
            <h1>Find Exercises</h1>
            <p>Search for exercises by muscle group to add to your workout.</p>

            <form action="/fitness/exercises/search" method="GET" class="styled-form" style="max-width: 500px; margin: 0 auto;">
            <p>Search for exercises by muscle group to get inspiration.</p>

            <form action="<%= basePath %>/fitness/exercises/search" method="GET" class="styled-form" style="max-width: 500px; margin: 0 auto;">
                <div class="form-group">
                    <label for="muscle">Select Muscle Group</label>
                    <select name="muscle" id="muscle">
                        <option value="abdominals" <%= selectedMuscle === 'abdominals' ? 'selected' : '' %>>Abdominals</option>
                        <option value="biceps" <%= selectedMuscle === 'biceps' ? 'selected' : '' %>>Biceps</option>
                        <option value="calves" <%= selectedMuscle === 'calves' ? 'selected' : '' %>>Calves</option>
                        <option value="chest" <%= selectedMuscle === 'chest' ? 'selected' : '' %>>Chest</option>
                        <option value="glutes" <%= selectedMuscle === 'glutes' ? 'selected' : '' %>>Glutes</option>
                        <option value="hamstrings" <%= selectedMuscle === 'hamstrings' ? 'selected' : '' %>>Hamstrings</option>
                        <option value="lats" <%= selectedMuscle === 'lats' ? 'selected' : '' %>>Lats</option>
                        <option value="lower_back" <%= selectedMuscle === 'lower_back' ? 'selected' : '' %>>Lower Back</option>
                        <option value="quadriceps" <%= selectedMuscle === 'quadriceps' ? 'selected' : '' %>>Quadriceps</option>
                        <option value="triceps" <%= selectedMuscle === 'triceps' ? 'selected' : '' %>>Triceps</option>
                    </select>
                </div>
                <button type="submit" class="btn-cta">Find Exercises</button>
            </form>

            <% if (exercises && exercises.length > 0) { %>
            <div class="results-grid" style="margin-top: 40px; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <% exercises.forEach(function(ex) { %>
                <div class="card" style="background: var(--surface); padding: 20px; border-radius: 12px; border: 1px solid var(--secondary);">
                    <h3 style="color: var(--accent); margin-bottom: 10px;"><%= ex.name %></h3>
                    <p><strong>Type:</strong> <%= ex.type %></p>
                    <p><strong>Muscle:</strong> <%= ex.muscle %></p>
                    <p><strong>Difficulty:</strong> <%= ex.difficulty %></p>
                    <p style="margin-top: 10px; font-size: 0.9rem; color: var(--text-muted)"><%= ex.instructions.substring(0, 100) %>...</p>
                    <div style="margin-top: 15px; text-align: right;">
                        <a href="<%= basePath %>/fitness/add?activity_name=<%= encodeURIComponent(ex.name) %>"
                       class="btn-login"
                       style="display: inline-block; margin-top: 15px; text-align: center; width: 100%;">
                       Log This
                    </a>
                    </div>
                </div>
                <% }); %>
            </div>
        </section>
        <% } else if (typeof exercises !== 'undefined') { %>
        <section class="content-section" style="text-align: center;">
            <p>No exercises found.</p>
        </section>
        <% } %>

    </body>
</html>
