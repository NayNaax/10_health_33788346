<header class="main-header">
    <div class="logo">Bitality</div>
    <nav>
        <a href="<%= basePath %>/">Home</a>
        <a href="<%= basePath %>/about">About</a>
        <a href="<%= basePath %>/fitness/add">Add Workout</a>
        <a href="<%= basePath %>/fitness/search">Search</a>
        <div class="dropdown">
            <a href="#" style="pointer-events: none">Fitness Tools ‚ñæ</a>
            <div class="dropdown-content">
                <a href="<%= basePath %>/fitness/bmi">BMI Calculator</a>
                <a href="<%= basePath %>/fitness/bmr">BMR Calculator</a>
                <a href="<%= basePath %>/fitness/macros">Macro Calculator</a>
                <a href="<%= basePath %>/fitness/nutrition">Nutrition Tracker</a>
                <a href="<%= basePath %>/fitness/water">Water Tracker</a>
                <a href="<%= basePath %>/fitness/exercises">Find Exercises</a>
                <a href="<%= basePath %>/fitness/tips">Health Tips</a>
            </div>
        </div>
        <% if (user) { %>
        <span style="color: var(--text-muted); margin: 0 10px"
            >Hi,
            <a href="<%= basePath %>/fitness/profile" style="color: var(--accent); font-weight: bold"
                ><%= user %></a
            ></span
        >
        <a href="<%= basePath %>/fitness/audit">View Logs</a>
        <a href="<%= basePath %>/users/logout" class="btn-login" style="background-color: #ef4444">Logout</a>
        <% } else { %>
        <a href="<%= basePath %>/users/login" class="btn-login">Login</a>
        <% } %>
        <button
            id="theme-toggle"
            style="
                margin-left: 20px;
                background: none;
                border: none;
                font-size: 1.5rem;
                cursor: pointer;
                color: var(--text);
            "
        >
            üåô
        </button>

        <script>
            const toggleBtn = document.getElementById("theme-toggle");
            const body = document.body;

            // Check local storage
            if (localStorage.getItem("theme") === "light") {
                body.classList.add("light-mode");
                toggleBtn.innerText = "‚òÄÔ∏è";
            }

            toggleBtn.addEventListener("click", () => {
                body.classList.toggle("light-mode");
                if (body.classList.contains("light-mode")) {
                    localStorage.setItem("theme", "light");
                    toggleBtn.innerText = "‚òÄÔ∏è";
                } else {
                    localStorage.setItem("theme", "dark");
                    toggleBtn.innerText = "üåô";
                }
            });
        </script>
    </nav>
</header>
